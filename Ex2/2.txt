Script started on Tue Feb  5 12:39:41 2019
[?1034hbash-3.2$ cat myls.c
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<unistd.h>
#include<dirent.h>
#include<sys/stat.h>
#include<sys/types.h>
char directory[1000];
char* dirs[100];
int dl = 0;
int l = 0, a = 0, r = 0;
void mylsfn(char direc[1000])
{
    struct dirent *d;
    DIR *p;
    p = opendir(direc);
    if(p == NULL)
    {
        exit(1);
    }
    while(d = readdir(p)) {
        if(l == 1) {
            if(a == 0 && (d->d_name)[0] == '.') continue;
            struct stat fileStat;
            stat(d->d_name,&fileStat);
            printf((S_ISDIR(fileStat.st_mode)) ? "d" : "-");
            printf((fileStat.st_mode & S_IRUSR) ? "r" : "-");
            printf((fileStat.st_mode & S_IWUSR) ? "w" : "-");
            printf((fileStat.st_mode & S_IXUSR) ? "x" : "-");
            printf((fileStat.st_mode & S_IRGRP) ? "r" : "-");
            printf((fileStat.st_mode & S_IWGRP) ? "w" : "-");
            printf((fileStat.st_mode & S_IXGRP) ? "x" : "-");
            printf((fileStat.st_mode & S_IROTH) ? "r" : "-");
            printf((fileStat.st_mode & S_IWOTH) ? "w" : "-");
            printf((fileStat.st_mode & S_IXOTH) ? "x" : "-");
            printf("  %-5lu %-5d %-5d %-5lu %-20s\n",fileStat.st_nlink,fileStat.st_uid,fileStat.st_gid,fileStat.st_size,d->d_name);
        }
        else if(l == 0)  {
            if(a == 0 && (d->d_name)[0] == '.') continue;
            printf("%-20s",d->d_name);
        }
        if(r == 1) {
            struct stat fileStat;
            stat(d->d_name,&fileStat);
            if(S_ISDIR(fileStat.st_mode) && strcmp(d->d_name,".") && strcmp(d->d_name,"..")) {
                getcwd(directory,sizeof(directory));
                printf("\n");
                mylsfn(strcat(strcat(directory,"/"),d->d_name));
            }
            printf("\n");
        }
    }
    closedir(p);
    printf("\n");
}
int main(int argc, char *argv[])
{
	for(int i = 1; i < argc; i++) {
		if(strcmp(argv[i],"-l") == 0) l = 1;
		else if(strcmp(argv[i],"-a") == 0) a = 1;
		else if(strcmp(argv[i],"-R") == 0) r = 1;
	}
	getcwd(directory, sizeof(directory));
    mylsfn(directory);
	exit(0);
}
bash-3.2$ gcc myls.c -o myls -w
bash-3.2$ cp myls ../myls
bash-3.2$ cd ..
bash-3.2$ ./myls
Ex1b                myls                Ex1a                Ex4                 Ex3                 Ex2                 Ex5                 
bash-3.2$ ./myls -a
.                   ..                  Ex1b                .DS_Store           myls                Ex1a                Ex4                 Ex3                 Ex2                 Ex5                 
bash-3.2$ ./myls -l
drwxr-xr-x  24    501   20    768   Ex1b                
-rwxr-xr-x  1     501   20    9096  myls                
drwxr-xr-x  6     501   20    192   Ex1a                
drwxr-xr-x  8     501   20    256   Ex4                 
drwxr-xr-x  11    501   20    352   Ex3                 
drwxr-xr-x  5     501   20    160   Ex2                 
drwxr-xr-x  9     501   20    288   Ex5                 

bash-3.2$ ./myls -R
Ex1b                
1b.txt              
file1.txt           
3.c                 
9.c                 
7.c                 
9                   
7                   
6                   
1                   
8                   
4.c                 
run.sh              
1.c                 
5.c                 
8.c                 
2.c                 
4                   
3                   
6.c                 
2                   
5                   


myls 

               
Ex1a                
file.txt            
file3.txt           
1a.txt              


Ex4                 
NPP.c               
RR.c                
PSJF.c              
RR                  
FCFS.c              
FCFS                


Ex3                 
max3.sh             
math.sh             
disp.sh             
while5.sh           
pattri.sh           
myfile.txt          
fileline.sh         
pattern.sh          
fileex.sh           


Ex2                 
myls                
2.txt               
myls.c              


Ex5                 
P2S                 
P1.c                
P2S.c               
P2C.c               
P1                  
P2C                 


bash-3.2$ exit
exit

Script done on Tue Feb  5 12:40:53 2019
